# StructBench

構造体をメソッドに渡すときにコピーか参照どっちで渡すのがいいのか調べるために作りました。

参照渡しには、C#7.2のin修飾子を用いています。
また、インライン展開の有無での違いについても検証しています。

詳細はソースを見ればわかりますが、一応ちゃんとした結果の出る計算をしています。

以下、64bit Releaseでの実行結果です。

    [2D]
    00:00:03.0516984 DotCopyNotInline(11000000000)
    00:00:02.9883062 DotCopyInline(11000000000)
    00:00:02.8675257 DotInNotInline(11000000000)
    00:00:02.8820201 DotInInline(11000000000)
    [4D]
    00:00:04.4954439 DotCopyNotInline(70000000000)
    00:00:04.5463547 DotCopyInline(70000000000)
    00:00:02.9618563 DotInNotInline(70000000000)
    00:00:02.8590655 DotInInline(70000000000)

おおむね参照渡しのほうが速いという結果になりました。
コピーのコストがかからない分、大きい構造体のほうが効果は大きくなりました。

インライン展開については、有意な差は見られませんでした。

--------------------------------------------------------------------------------

作者：松田美文( https://github.com/mifumi323 )

ライセンス：WTFPL

作者はこのプログラムを用いて起きたいかなる損害に対しても責任を負いません。
